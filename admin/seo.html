<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SEO Settings | Color Hut Studio</title>
    <link rel="icon" type="image/png" href="/logo.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <style>
        :root {
            --primary: #f97316;
            --primary-dark: #ea580c;
        }

        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: #f8fafc;
        }

        .sidebar-link {
            transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
        }

        .sidebar-link.active {
            background: linear-gradient(to right, #fff7ed, #fff);
            color: #ea580c;
            border-right: 3px solid #ea580c;
        }

        .sidebar-link:hover:not(.active) {
            background-color: #f8fafc;
            color: #ea580c;
            padding-left: 1.25rem;
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(226, 232, 240, 0.8);
        }
    </style>
</head>

<body class="flex h-screen overflow-hidden bg-slate-50">

    <!-- Sidebar -->
    <aside id="admin-sidebar"
        class="w-64 bg-white border-r border-slate-200 flex-shrink-0 flex flex-col z-20 hidden md:flex"></aside>

    <!-- Main Content -->
    <main class="flex-1 overflow-auto">
        <div class="p-6 md:p-10 max-w-5xl mx-auto">
            <div class="mb-10">
                <h1 class="text-3xl font-black text-slate-900 tracking-tight mb-2">SEO Settings</h1>
                <p class="text-slate-500 font-medium">Configure search engine optimization for your store.</p>
            </div>

            <form id="seoForm" class="space-y-8">
                <!-- Site-wide Metadata -->
                <div class="bg-white rounded-[2.5rem] border border-slate-100 shadow-xl shadow-slate-200/50 p-8">
                    <h3 class="text-xl font-bold text-slate-900 mb-6 flex items-center gap-3">
                        <span
                            class="w-8 h-8 rounded-full bg-orange-100 text-orange-600 flex items-center justify-center">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" stroke-width="2"
                                    stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                        </span>
                        Global Metadata
                    </h3>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="space-y-2">
                            <label class="text-xs font-black uppercase tracking-widest text-slate-400">Home Title
                                Template</label>
                            <input type="text" id="home_title" name="home_title"
                                placeholder="Color Hut Studio | Premium Digital Assets"
                                class="w-full px-5 py-4 bg-slate-50 border border-slate-200 rounded-2xl focus:bg-white focus:border-orange-500 focus:ring-4 focus:ring-orange-500/5 outline-none font-bold text-slate-900 transition-all">
                        </div>
                        <div class="space-y-2">
                            <label class="text-xs font-black uppercase tracking-widest text-slate-400">Global Title
                                Suffix</label>
                            <input type="text" id="site_title_suffix" name="site_title_suffix"
                                placeholder="| Color Hut Studio"
                                class="w-full px-5 py-4 bg-slate-50 border border-slate-200 rounded-2xl focus:bg-white focus:border-orange-500 focus:ring-4 focus:ring-orange-500/5 outline-none font-bold text-slate-900 transition-all">
                        </div>
                        <div class="md:col-span-2 space-y-2">
                            <label class="text-xs font-black uppercase tracking-widest text-slate-400">Home Meta
                                Description</label>
                            <textarea id="home_description" name="home_description" rows="3"
                                placeholder="Color Hut Studio offers premium digital assets, branding stationery, and luxury corporate identity solutions in Bangladesh."
                                class="w-full px-5 py-4 bg-slate-50 border border-slate-200 rounded-2xl focus:bg-white focus:border-orange-500 focus:ring-4 focus:ring-orange-500/5 outline-none font-bold text-slate-900 transition-all resize-none"></textarea>
                        </div>
                        <div class="md:col-span-2 space-y-2">
                            <label class="text-xs font-black uppercase tracking-widest text-slate-400">Default Meta
                                Keywords (Comma separated)</label>
                            <input type="text" id="site_keywords" name="site_keywords"
                                placeholder="Branding, Stationery, Digital Assets, Luxury Corporate Gifts"
                                class="w-full px-5 py-4 bg-slate-50 border border-slate-200 rounded-2xl focus:bg-white focus:border-orange-500 focus:ring-4 focus:ring-orange-500/5 outline-none font-bold text-slate-900 transition-all">
                        </div>
                    </div>
                </div>

                <!-- Indexing & Crawling -->
                <div class="bg-white rounded-[2.5rem] border border-slate-100 shadow-xl shadow-slate-200/50 p-8">
                    <h3 class="text-xl font-bold text-slate-900 mb-6 flex items-center gap-3">
                        <span class="w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path
                                    d="M9 20l-5.447-2.724A2 2 0 013 15.487V6.513a2 2 0 011.553-1.943L9 2l5.447 2.724A2 2 0 0116 6.513v8.974a2 2 0 01-1.553 1.943L9 20z"
                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                        </span>
                        Search Console & Robots
                    </h3>

                    <div class="space-y-6">
                        <div
                            class="flex items-center justify-between p-4 bg-slate-50 rounded-2xl border border-slate-100">
                            <div>
                                <h4 class="font-bold text-slate-900 text-sm">Active Sitemap</h4>
                                <p class="text-xs text-slate-500">Automatically updated on every page visit.</p>
                            </div>
                            <a href="/mysitemap.xml" target="_blank"
                                class="text-xs font-black uppercase bg-white px-4 py-2 rounded-xl border border-slate-200 shadow-sm text-slate-600 hover:text-orange-500 transition-colors">/mysitemap.xml</a>
                        </div>

                        <div class="space-y-2">
                            <label class="text-xs font-black uppercase tracking-widest text-slate-400">Robots.txt
                                Content</label>
                            <textarea id="robotsContent" rows="8"
                                class="w-full px-5 py-4 bg-slate-950 border border-slate-800 rounded-2xl focus:ring-4 focus:ring-white/5 outline-none font-mono text-sm text-slate-300 transition-all resize-none"></textarea>
                            <p class="text-[10px] font-bold text-slate-400 px-2 italic uppercase tracking-wider mt-1">*
                                Exercise caution when editing robots.txt</p>
                        </div>
                    </div>
                </div>

                <div class="flex justify-end gap-4">
                    <button type="button" onclick="window.history.back()"
                        class="px-8 py-4 rounded-2xl text-sm font-bold text-slate-500 hover:bg-slate-100 transition-colors">Cancel</button>
                    <button type="submit"
                        class="px-10 py-4 bg-slate-900 text-white rounded-2xl text-sm font-black hover:bg-orange-600 transition-all shadow-xl shadow-slate-900/10 active:scale-95">Save
                        Changes</button>
                </div>
            </form>
        </div>
    </main>

    <script>
        async function loadSettings() {
            try {
                // Load site settings
                const settingsResp = await fetch('/api/admin/settings');
                const settings = await settingsResp.json();

                // Populate fields
                document.getElementById('home_title').value = settings.home_title || '';
                document.getElementById('site_title_suffix').value = settings.site_title_suffix || '';
                document.getElementById('home_description').value = settings.home_description || '';
                document.getElementById('site_keywords').value = settings.site_keywords || '';

                // Load robots.txt
                const robotsResp = await fetch('/api/admin/robots');
                const robots = await robotsResp.json();
                document.getElementById('robotsContent').value = robots.content;

            } catch (err) {
                console.error('Error loading SEO settings:', err);
                alert('Failed to load settings');
            }
        }

        document.getElementById('seoForm').onsubmit = async (e) => {
            e.preventDefault();
            const formData = new FormData(e.target);
            const settings = {
                home_title: formData.get('home_title'),
                site_title_suffix: formData.get('site_title_suffix'),
                home_description: formData.get('home_description'),
                site_keywords: formData.get('site_keywords')
            };

            try {
                // Save settings
                const settingsResp = await fetch('/api/admin/settings', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(settings)
                });

                // Save robots.txt
                const robotsResp = await fetch('/api/admin/robots', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ content: document.getElementById('robotsContent').value })
                });

                if (settingsResp.ok && robotsResp.ok) {
                    alert('SEO settings updated successfully!');
                } else {
                    alert('Failed to update some settings.');
                }
            } catch (err) {
                console.error('Error saving SEO settings:', err);
                alert('Error occurred while saving');
            }
        };

        document.addEventListener('DOMContentLoaded', loadSettings);
    </script>
    <script src="/assets/admin-sidebar.js?v=2"></script>
</body>

</html>